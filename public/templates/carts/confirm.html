<%
var totalPrice = 0;
var amount;
var product = product || {};
var i = 1;
APP.user = APP.user || {};
%>
<div class="center-block">
    <h1 class="text-center">Cart</h1>

    <div class="col-md-8 col-md-offset-2">
        <form class="form-horizontal" role="form">
            <table class="table table-hover table-bordered">
                <thead>
                <tr>
                    <th>â„–</th>
                    <th>Product</th>
                    <th>Count</th>
                    <th>Price</th>
                </tr>
                </thead>
                <tbody>
                <%
                _.each(collection, function(product) {
                amount = product.amount || 1;
                totalPrice += product.price * amount;
                %>
                <tr>
                    <td><%= i++ %>.</td>
                    <td><%= product.name %></td>
                    <td>x <input type="number" id="amount" name="<%= product._id %>" value="<%= amount %>"></td>
                    <td>$<%= product.price * amount %></td>
                </tr>
                <% }); %>
                <tr>
                    <td></td>
                    <td></td>
                    <td>Total:</td>
                    <td>$<%= totalPrice %></td>
                </tr>
                </tbody>
            </table>
            <table class="table table-hover table-bordered">
                <tbody>
                <tr>
                    <td><label class="control-label">Address:</label></td>
                    <td><textarea name="address" class="form-control"><%= APP.user.get('address') %></textarea></td>
                </tr>
                <tr>
                    <td><input id="confirm" type="button" class="btn btn-success" value="Confirm"></td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>
